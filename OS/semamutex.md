# 세마포어 & 뮤텍스

`여러 개의 프로세스나 스레드가 공유 자원(임계영역, Critical Section)에 접근하는 것을 제어`하기 위한 방법, 병행 처리를 위한 프로세스 동기화 기법
<br>

### Critical Section(임계영역)
다중 프로그래밍 운영체제에서 여러 개의 프로세스(스레드)가 데이터를 공유하면서 수행될 때 각 `프로세스(스레드)에서 공유 데이터를 엑세스하는 프로그램 코드` 부분
<br>

## 세마포어
접근할 수 있는 최대 허용치만큼 동시에 사용자 접근을 할 수 있게 함.
<br>

### 동작 원리

***semWait***

`세마포어 값을 감소`시킴, 값이 음수가 되면 semWait를 호출한 프로세스는 블록이 되고 음수가 아니면 계속 수행함.
<br>

***semSignal***

`세마포어 값을 증가`시킴, 값이 양수가 아니면 setWait연산에 의해 블록된 프로세스들을 깨움.
<br>

### 종류

**이진세마포어**

세마포어의 초기 값이 0 또는 1만 가질 수 있는 세마포어
<br>

**범용 세마포어(카운팅 세마포어)**

임계영역 안에 스레드나 프로세스가 들어오면 카운트를 증가시켜 일정 숫자만큼의 스레드만 사용
<br>

## 뮤텍스
`임계영역에 들어갈 때 lock(락)`을 걸어 다른 프로세스(스레드)가 접근하지 못하도록하고 `임계영역에 나와 락을 해제`하여 공유된 자원의 데이터를 여러 스레드가 접근하는 것을 막는 것
<br>

### 동작 원리
***lock***

현재 뮤텍스 값이 1,  뮤텍스의 값을 0으로 만들어 다른 프로세스(스레드)가 접근하지 못하도록 락을 걸음.
<br>

***unlock***

뮤텍스의 값을 1로 만들어 다른 프로세스가 접근할 수 있도록 락을 해제
<br>


## 차이점

- **세마포어**는 공유자원에서 `세마포어의 변수만큼의 프로세스가 접근` 가능, **뮤텍스**는 오직 `1개의 프로세스만 접근`

- **세마포어**는 현재 수행 중인 프로세스가 아닌 다른 프로세스가 세마포어를 해제 가능, **뮤텍스**는 락을 획득한 프로세스만 락을 해제 가능
<br>
<br>
<br>

##### [참고]
[1](https://velog.io/@conatuseus/OS-%EC%84%B8%EB%A7%88%ED%8F%AC%EC%96%B4%EC%99%80-%EB%AE%A4%ED%85%8D%EC%8A%A4), [2](https://dailyheumsi.tistory.com/133)
